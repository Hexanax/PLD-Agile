<html>
<head>
	<title>{% block title %}Picky{% endblock %}</title>
    <style type="text/css">
        {% include "templates/css/test.css" %}
    </style>
</head>
<body>

    <div id="header">
            <div id="logo">
                {% include "templates/svg/icon.svg.peb" %}
            </div>
            <h1 id="logo-title"> Picky - Road Map </h1>
    </div>
	<div id="content">
	    <div id="time">
            <div class="estimation-row">
                Estimated time to complete the tour : <div class="estimated-val">{{ total_time }}</div>
            </div>
            <div class="estimation-row">
                Distance in meters : <div class="estimated-val">{{ lenght | numberformat("#.##") }}</div>
            </div>
            <div class="estimation-row"> Estimated travels time : <div class="estimated-val">{{ travels_time }} </div></div>
            <div class="estimation-row"> Estimated pickups time : <div class="estimated-val">{{ pickups_time }} </div></div>
            <div class="estimation-row"> Estimated deliveries time : <div class="estimated-val">{{ deliveries_time }} </div></div>
        </div>
        <hr/>
        <div class="depot icon-container">
                <div class="icon"> {% include "templates/svg/depot.svg.peb" %} </div>
            <div class="depot-txt icon-container-txt">
                <div> Departure from the depot at intersection no. {{ depot.intersection.id }} </div>
                <div> Departure scheduled at <span class="estimated-val">{{ depot.departureTime| date("HH:mm:ss", timeZone="Europe/Paris") }} </span></div>
            </div>
        </div>
        <hr/>
        {{ depot }}
        <div id="path">
        {% for row in rows %}
            <div class="path-seg">
                {% if row.type == "Segment"%}
                    <div class="path-seg-cnt">
                        <div class="dir-txt">Follow the {{row.object.name}} over {{row.object.length| numberformat("#.##")}} meters to the intersection no.{{ row.object.destination.id}}</div>
                    </div>
                {% elseif row.type == "Intersection"  %}
                    {% if row.step and not row.finish %}
                            <div class="dir-chg">
                                {% if row.orientation==0 %}
                                    <div class = "arrow icon"> {% include "templates/svg/north.svg.peb" %} </div>
                                    <div class="dir-chg-txt">After dealing with deliveries go straight ahead on the road called : {{ row.segment_name }}</div>
                                {% elseif row.orientation==1 %}
                                    <div class = "arrow icon"> {% include "templates/svg/east.svg.peb" %} </div>
                                    <div class="dir-chg-txt">After dealing with deliveries turn right on the road called : {{ row.segment_name }}</div>
                                {% elseif row.orientation==2 %}
                                    <div class = "arrow icon"> {% include "templates/svg/west.svg.peb" %} </div>
                                    <div class="dir-chg-txt">After dealing with deliveries turn left on the road called : {{ row.segment_name }}</div>
                                {% elseif row.orientation==3 %}
                                    <div class = "arrow icon"> {% include "templates/svg/south.svg.peb" %} </div>
                                    <div class="dir-chg-txt">After dealing with deliveries turn back on the road called : {{ row.segment_name }}</div>
                                {% else %}
                                    <div class="dir-txt"> After dealing with deliveries follow the road called : {{ row.segment_name }}</div>
                                {% endif %}
                            </div>

                    {% elseif not row.finish  %}
                        <div class="dir-chg">
                            {% if row.orientation==0 %}
                                <div class = "arrow icon"> {% include "templates/svg/north.svg.peb" %} </div>
                                <div class="dir-chg-txt">At the intersection no {{row.object.id}} go straight ahead on the road called : {{ row.segment_name }}</div>
                            {% elseif row.orientation==1 %}
                                <div class = "arrow icon"> {% include "templates/svg/east.svg.peb" %} </div>
                                <div class="dir-chg-txt">At the intersection no {{row.object.id}} turn right on the road called : {{ row.segment_name }}</div>
                            {% elseif row.orientation==2 %}
                                <div class = "arrow icon"> {% include "templates/svg/west.svg.peb" %} </div>
                                <div class="dir-chg-txt">At the intersection no {{row.object.id}} turn left on the road called : {{ row.segment_name }}</div>
                            {% elseif row.orientation==3 %}
                                <div class = "icon"> {% include "templates/svg/south.svg.peb" %} </div>
                                <div class="dir-txt">At the intersection no {{row.object.id}} turn back on the road called : {{ row.segment_name }}</div>
                            {% else %}
                                <div class="dir-chg-txt">At the intersection no {{row.object.id}} follow the road called : {{ row.segment_name }}</div>
                            {% endif %}
                        </div>

                    {% endif %}
                {% else %}
                <div class="stop-container">
                    <div class= "stop-txt"> At the intersection no {{row.object.intersection.id}}</div>
                    {% if row.subtype == "pickup" %}
                        <div class="pickup icon-container">
                            <div class="pickup-icon icon">
                                {% include "templates/svg/pickup.svg.peb" %}
                            </div>
                            <div class="pickup-txt icon-container-txt">
                                <div>
                                    You have a package to pick up. This will take about <span class="estimated-val">{{ row.object.duration/60 }}min {{ (row.object.duration - (row.object.duration/60)*60) }}s</span>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <div class="delivery icon-container">
                            <div class="delivery-icon icon" >
                                {% include "templates/svg/dropoff.svg.peb" %}
                            </div>
                            <div class="delivery-txt icon-container-txt">
                                <div>
                                    You have a package to deliver. This will take about <span class="estimated-val"> {{ row.object.duration/60 }}min {{ (row.object.duration - (row.object.duration/60)*60) }}s </span>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                </div>
                {% endif %}
            </div>
        {% endfor %}
        </div>
        <hr/>
        <div class="depot icon-container">
            <div class="depot-icon icon" > {% include "templates/svg/depot.svg.peb" %} </div>
            <div class="depot-txt icon-container-txt">
                <div>
                    Welcome home, you have finished your tour
                </div>
            </div>
        </div>
        <hr/>
	</div>

	<div id="footer">
		{% block footer %}
			Copyright 2021 - INSA LYON - DÃ©partment Informatique - HEXANOME 4102
		{% endblock %}
	</div>
</body>
</html>